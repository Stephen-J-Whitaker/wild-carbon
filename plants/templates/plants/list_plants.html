{% extends "base.html" %}
{% load static %}

{% block head_title %}
    plant list
{% endblock %}
{% block main_style %}main-container-offset{% endblock %}
{% block content %}
    <h1>Plants</h1>
    <a href="{% url 'add_plant' %}">Add Plant</a>
    <!-- Search box and sort box HTML supplied by Code Institute -->
    <div>
        <form method="GET" action="{% url 'list_plants' %}">
            <div class="input-group w-50">
                <input class="form-control border border-black rounded-0" type="text" name="q" placeholder="Search our site">
                <div class="input-group-append">
                    <button class="form-control btn btn-black border border-black rounded-0" type="submit">
                        <span class="icon">
                            <i class="fas fa-search"></i>
                        </span>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="sort-select-wrapper w-50">
        <select id="sort-selector" class="custom-select custom-select-sm rounded-0 border border-{% if current_sorting != 'None_None' %}info{% else %}black{% endif %}">
            <option value="reset" {% if current_sorting == 'None_None' %}selected{% endif %}>Sort by...</option>
            <option value="price__asc" {% if current_sorting == 'price__asc' %}selected{% endif %}>Price (low to high)</option>
            <option value="price__desc" {% if current_sorting == 'price__desc' %}selected{% endif %}>Price (high to low)</option>
            <option value="common_name__asc" {% if current_sorting == 'common_name__asc' %}selected{% endif %}>Name (A-Z)</option>
            <option value="common_name__desc" {% if current_sorting == 'common_name__desc' %}selected{% endif %}>Name (Z-A)</option>
        </select>
    </div>
    <!-- End of search box and sort box HTML supplied by Code Institute -->
    <div class="plant-list-container">
        <div class="plant-list">
            {% for plant in plants %}
                <div class="plant-instance">
                    {% if plant.image %}
                        <img class="plant-image" src="{{ plant.image.url }}" alt="{{ plant.common_name }}">
                    {% else %}
                        <img class="plant-image" src="{{ MEDIA_URL }}noimage.png" alt="{{ plant.common_name }}">
                    {% endif %}
                    <div>{{ plant.common_name }}</div>
                    <span>{{ plant.genus }}</span>
                    <span>{{ plant.species }}</span>
                    <div>{{ plant.price }}</div>
                    <div>{{ plant.sku }}</div>
                    <div>
                        <a href="{% url 'edit_plant' plant.id %}">Edit</a> |
                        <a href="{% url 'delete_plant' plant.id %}">Delete</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock%}

{% block extra_js %}
    <script src="{% static 'js/wild_carbon/search_sort.js' %}"></script>
{% endblock %}