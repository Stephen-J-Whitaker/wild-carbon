{% extends "base.html" %}
{% load static %}

{% block head_title %}
    plant list
{% endblock %}
{% block main_style %}main-container-offset{% endblock %}
{% block content %}
    <h1>Plants</h1>
    <a href="{% url 'add_plant' %}">Add Plant</a>
    <!-- Search box and sort box HTML supplied by Code Institute -->
    <div>
        <form method="GET" action="{% url 'plant_list' %}">
            <div class="input-group w-50">
                <input class="form-control border border-black rounded-0" type="text" name="q" placeholder="Search our site">
                <div class="input-group-append">
                    <button class="form-control btn btn-black border border-black rounded-0" type="submit">
                        <span class="icon">
                            <i class="fas fa-search"></i>
                        </span>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div class="sort-select-wrapper w-50">
        <select id="sort-selector" class="custom-select custom-select-sm rounded-0 border border-{% if current_sorting != 'None_None' %}info{% else %}black{% endif %}">
            <option value="reset" {% if current_sorting == 'None_None' %}selected{% endif %}>Sort by...</option>
            <option value="price_asc" {% if current_sorting == 'price_asc' %}selected{% endif %}>Price (low to high)</option>
            <option value="price_desc" {% if current_sorting == 'price_desc' %}selected{% endif %}>Price (high to low)</option>
            <option value="name_asc" {% if current_sorting == 'name_asc' %}selected{% endif %}>Name (A-Z)</option>
            <option value="name_desc" {% if current_sorting == 'name_desc' %}selected{% endif %}>Name (Z-A)</option>
        </select>
    </div>
    <!-- End of search box and sort box HTML supplied by Code Institute -->
    {% for plant in plants %}
        {% if plant.image %}
            <img src="{{ plant.image.url }}" alt="{{ plant.common_name }}">
        {% else %}
            <img src="{{ MEDIA_URL }}noimage.png" alt="{{ plant.common_name }}">
        {% endif %}
        <div>{{ plant.common_name }}</div>
        <span>{{ plant.genus }}</span>
        <span>{{ plant.species }}</span>
        <div>{{ plant.price }}</div>
        <div>{{ plant.sku }}</div>
        <a href="{% url 'edit_plant' plant.id %}">Edit</a>
    {% endfor %}
{% endblock%}